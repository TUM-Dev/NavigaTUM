FROM getmeili/meilisearch:v0.26.1

COPY ./configure_MeileSearch.sh /configure_MeileSearch.sh
RUN apk add --no-cache jq

# Get configuration data
ADD https://nav.tum.sexy/cdn/search_data.json search_data.json
ADD https://nav.tum.sexy/cdn/search_synonyms.json search_synonyms.json

EXPOSE 7700
ENTRYPOINT ./meilisearch|grep -v ' "GET /health HTTP/1.1" 200' & /configure_MeileSearch.sh